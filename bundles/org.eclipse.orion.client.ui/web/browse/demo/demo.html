<!doctype html>
<html>
    <head>
		<meta name="copyright" content="Copyright (c) IBM Corporation and others 2010." >
		<meta http-equiv="Content-Language" content="en-us">
		<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
		<title>View File</title>
	    <link rel="stylesheet" type="text/css" href="built-browse.css"/>
	    <link rel="stylesheet" type="text/css" href="font.css"/>
		<script src="require.min.js"></script>
		<script>
		/*global console require eclipse window */
	    require(["built-browse.js", 'orion/PageUtil', 'orion/Deferred', 'HTML5LocalFileImpl.js'], function(Browse, PageUtil, mDeferred) {
			orion = {Deferred: mDeferred};
			window.requestFileSystem  = window.requestFileSystem || window.webkitRequestFileSystem;
			if (window.requestFileSystem) {
				window.requestFileSystem(window.TEMPORARY, 10*1024*1024 , function(fs) {
					var service = new eclipse.HTML5LocalFileServiceImpl(fs);
					var serviceProperties = {
						Name: "HTML5 Local File contents",
						pattern: service._rootLocation,
						serviceId: 1,
						top: service._rootLocation
					};
					var serviceRef = {
						id: 123,
						serviceProperties: serviceProperties,
						impl: service
					};
					
					var fBrowser = new Browse({
						parent: "fileBrowser",//Required 
						serviceRefs: [serviceRef]
					}); 
					window.addEventListener("hashchange", function() { //$NON-NLS-0$
						fBrowser.getFileBrowser().refresh(PageUtil.hash());
					});
					fBrowser.getFileBrowser().refresh(PageUtil.hash());
				}, function(error) {
					console.log(error);
				});
			} 
	    });
		</script>
    </head>

	<body id="orion-browser" spellcheck="false" class="orionPage">
		<div class="fileBrowserDemoTextParent">
			<p>This is a demo for the <b>readonly</b> file system browse widget. The outer blue border represents an HTML DIV where the widget can be <b>embedded</b>. 
			Clicking on a folder will <b>drill in</b>. Clicking on the bread crumb will <b>drill out</b>. Clicking on a <b>text</b> file will open an editor with <b>syntax highlighting</b> depending on the file type. 
			Clicking on an <b>image</b> file will display it right in the section. If a <b>readme</b> file exists in a folder, a second section will show the readme contents below the main section.</p>
		</div>
		<div class="fileBrowserParent" id="fileBrowser">
		</div>
	</body>
</html>
